{"id":"llm-common-1pf","title":"UISmoke Agent: Story format inconsistency (Pydantic vs dataclass)","description":"## Problem\nThe UISmoke agent has two different story model representations:\n- Pydantic models in `schemas.py` (AgentStory, StoryResult, StepResult, SmokeRunReport)\n- Dataclass models in `models.py` (Story, StoryResult, StepResult, SmokeRunReport)\n\nThis causes:\n1. Confusion about which models to use\n2. JSON serialization issues (dataclasses need custom serialization)\n3. Inconsistent behavior across different components\n\n## Root Cause\nDuring the v0.5.0 refactor, Pydantic schemas were introduced in `schemas.py` but the old dataclass models in `models.py` were kept for backward compatibility.\n\n## Tasks\n1. Decide on canonical model format (Pydantic vs dataclass)\n2. Migrate all consumers to use the canonical format\n3. Deprecate/remove the old model format\n4. Update documentation to reflect the change","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-23T15:26:41.216569404+01:00","created_by":"feng","updated_at":"2026-01-23T15:26:51.187581171+01:00"}
{"id":"llm-common-1pf.1","title":"Standardize story models to Pydantic (schemas.py)","description":"Migrate all consumers from dataclass models (models.py) to Pydantic schemas (schemas.py). This includes:\n- Update run_prime_smoke.py to use AgentStory from schemas.py\n- Update ui_smoke_agent.py to use consistent models\n- Remove or deprecate old dataclass models","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-23T15:26:59.042835764+01:00","created_by":"feng","updated_at":"2026-01-23T15:26:59.042835764+01:00","dependencies":[{"issue_id":"llm-common-1pf.1","depends_on_id":"llm-common-1pf","type":"parent-child","created_at":"2026-01-23T15:26:59.043876486+01:00","created_by":"feng"}]}
{"id":"llm-common-3wa","title":"Integrate context pointers into ToolContextManager","description":"Wire FileContextPointerStore + ContextRelevanceSelector into llm_common.agents.ToolContextManager so apps can load selected tool outputs instead of dumping all context.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-26T15:46:06.465635-08:00","updated_at":"2025-12-26T17:15:04.770279-08:00","closed_at":"2025-12-26T17:15:04.770279-08:00"}
{"id":"llm-common-8xk","title":"DOCS/BEADS: Issue hygiene + jules packets","description":"Close confirmed-stale issues and create docs packets/tech plans for all P0/P1 + jules-ready + needs-user-input items.","status":"open","priority":1,"issue_type":"chore","created_at":"2025-12-26T17:46:10.672444-08:00","updated_at":"2025-12-26T17:46:10.672444-08:00"}
{"id":"llm-common-cmm","title":"SHARED_AGENT_CONTRACTS_AND_PRIMITIVES","description":"llm-common workstream for shared agent/runtime contract unification across affordabot + prime-radiant-ai. Focus: stable contracts (ToolResult/provenance, optional StreamEvent), shared primitives (ToolSelector, pointer store), versioning, and publish pinned releases.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-25T13:57:51.748649-08:00","updated_at":"2025-12-26T13:35:53.945712-08:00"}
{"id":"llm-common-cmm.1","title":"DOCS_FRONTEND_UNIFICATION_WORKSTREAM","description":"Create llm-common workstream spec for frontend stack unification and agent contract stabilization; includes Jules-dispatchable tasks and dependency mapping.","notes":"Initialized Beads in llm-common; mirroring canonical spec and creating contract/release tasks.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-25T13:57:57.87853-08:00","updated_at":"2025-12-25T14:07:54.288-08:00","closed_at":"2025-12-25T14:07:54.288-08:00","dependencies":[{"issue_id":"llm-common-cmm.1","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T13:57:57.880046-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.10","title":"DEXTER_PORTS_CORE_PRIMITIVES","description":"Provide shared, reusable implementations of Dexter portability wins in llm-common: (1) Tool selection helper and config (default glm-4.5-air), (2) context pointer store + relevance selection, (3) MessageHistory summaries + relevance selection. Apps consume via tagged release.","notes":"Jules-Ready: partial (umbrella integration tracker). Dispatch: docs/bd-llm-common-cmm/JULES_DISPATCH.md. Prefer dispatching child tasks first (llm-common-cmm.11, llm-common-cmm.12).","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-25T17:41:37.687872-08:00","updated_at":"2025-12-26T17:44:31.576994-08:00","dependencies":[{"issue_id":"llm-common-cmm.10","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:41:37.69107-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.11","title":"TOOL_SELECTION_HELPER_AND_MODEL_CONFIG","description":"Add a shared ToolSelector helper to llm-common: schema-grounded tool selection using a dedicated small model (default: glm-4.5-air). Provide a stable config surface (env vars) and tests.","notes":"Fire-and-forget spec: docs/bd-llm-common-cmm/packets/llm-common-cmm.11.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:42:13.146847-08:00","updated_at":"2025-12-29T07:49:32.03707-08:00","closed_at":"2025-12-29T07:49:32.03707-08:00","dependencies":[{"issue_id":"llm-common-cmm.11","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:42:13.150848-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.12","title":"CONTEXT_POINTER_STORE_AND_RELEVANCE_SELECTION_LIBRARY","description":"Provide a shared context pointer store + relevance selection helper in llm-common (Dexter-style), so both apps share storage format and selection logic.","notes":"Fire-and-forget spec: docs/bd-llm-common-cmm/packets/llm-common-cmm.12.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:42:13.347148-08:00","updated_at":"2025-12-26T17:15:04.882276-08:00","closed_at":"2025-12-26T17:15:04.882276-08:00","dependencies":[{"issue_id":"llm-common-cmm.12","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:42:13.347555-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.2","title":"CONTRACT_TOOLRESULT_PROVENANCE","description":"Stabilize ToolResult + provenance/evidence contract used by app frontends.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:57:59.716364-08:00","updated_at":"2025-12-29T08:54:53.43903-08:00","closed_at":"2025-12-29T08:54:53.43903-08:00","dependencies":[{"issue_id":"llm-common-cmm.2","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T13:57:59.717975-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.3","title":"CONTRACT_STREAM_EVENT_SCHEMA_OPTIONAL","description":"Define optional streaming event contract (StreamEvent) shared across apps if/when streaming is enabled.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:58:01.79925-08:00","updated_at":"2025-12-29T07:49:32.035743-08:00","closed_at":"2025-12-29T07:49:32.035743-08:00","dependencies":[{"issue_id":"llm-common-cmm.3","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T13:58:01.800818-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.4","title":"RELEASE_AND_PINNING_PLAN","description":"Cut llm-common release tag and provide pinning instructions for affordabot/prime; eliminate branch-based pins.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T13:58:03.452411-08:00","updated_at":"2025-12-29T07:49:32.027068-08:00","closed_at":"2025-12-29T07:49:32.027068-08:00","dependencies":[{"issue_id":"llm-common-cmm.4","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T13:58:03.453839-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.5","title":"DEXTER_AUDIT_REFRESH_AND_REWRITE_SPEC_UPDATES","description":"Refresh and expand the Dexter audit (local ~/dexter) and update llm-common-cmm workstream spec with missed integration ideas + low-hanging fruit (contracts, provenance, context selection, message history). Docs-only PR.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-25T17:14:40.43877-08:00","updated_at":"2025-12-25T17:20:29.591477-08:00","closed_at":"2025-12-25T17:20:29.591477-08:00","dependencies":[{"issue_id":"llm-common-cmm.5","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:14:40.439401-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.6","title":"LLM_COMMON_VERSION_TAG_ALIGNMENT","description":"Align llm-common pyproject.toml version with the latest released tag and define a single release/versioning source of truth.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-25T17:18:55.545916-08:00","updated_at":"2025-12-29T07:49:32.034081-08:00","closed_at":"2025-12-29T07:49:32.034081-08:00","dependencies":[{"issue_id":"llm-common-cmm.6","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:18:55.549251-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.7","title":"LLM_COMMON_PUBLISH_JSON_SCHEMA_ARTIFACTS","description":"Publish JSON Schema artifacts for canonical contracts (advisor request/response envelope, EvidenceEnvelope, StreamEvent optional) as part of llm-common releases.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:18:55.666866-08:00","updated_at":"2025-12-29T07:49:32.035149-08:00","closed_at":"2025-12-29T07:49:32.035149-08:00","dependencies":[{"issue_id":"llm-common-cmm.7","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:18:55.667195-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.8","title":"LLM_COMMON_MESSAGE_HISTORY_HELPER","description":"Implement a Dexter-style MessageHistory helper: summarize answers and select relevant prior turns via structured output. Keep it optional and backend-agnostic.","notes":"Library implemented + merged (llm-common#39). Released as llm-common v0.7.5 tag. Remaining acceptance: demonstrate usage in an app (tracking in prime-radiant-ai bd-d7l7 / Jules session 15760309866269394898).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:18:55.785691-08:00","updated_at":"2025-12-29T10:21:28.126867-08:00","closed_at":"2025-12-29T10:21:28.126867-08:00","dependencies":[{"issue_id":"llm-common-cmm.8","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:18:55.786094-08:00","created_by":"daemon"}]}
{"id":"llm-common-cmm.9","title":"DEXTER_PORTS_BUNDLE_SPEC_AND_TASKS","description":"Docs-only: bundle Dexter port ideas (small-model tool selection via glm-4.5-air, context pointer store+relevance selection, message history summaries) into llm-common workstream spec with Jules-ready tasks.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-25T17:41:14.731866-08:00","updated_at":"2025-12-25T17:44:09.578499-08:00","closed_at":"2025-12-25T17:44:09.578499-08:00","dependencies":[{"issue_id":"llm-common-cmm.9","depends_on_id":"llm-common-cmm","type":"parent-child","created_at":"2025-12-25T17:41:14.732312-08:00","created_by":"daemon"}]}
{"id":"llm-common-grd","title":"UISmoke Agent: Critical fixes for runner harness","description":"## Context\nThese issues were discovered and fixed during smoke test validation.\n\n## Issues Fixed (Code Changes Made)\n1. **extra_body conflict** - ZaiClient was passing extra_body inline AND via **kwargs, causing 'multiple values for keyword' error\n2. **GLMVisionClient.close() missing** - No method to properly close AsyncOpenAI client\n3. **load_story not exported** - Story loading function not accessible from llm_common.agents\n4. **goals-\u003esteps mapping** - load_stories_from_directory didn't handle legacy 'goals' format\n\n## Remaining Tasks\n1. [ ] Verify fixes with actual smoke test run\n2. [ ] Update documentation for new story format support\n3. [ ] Consider deprecating dataclass models (see epic llm-common-1pf)","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-23T15:27:09.884153176+01:00","created_by":"feng","updated_at":"2026-01-23T15:27:09.884153176+01:00"}
{"id":"llm-common-sw5","title":"Dexter RAG V2: llm-common Upgrade","description":"Port Dexter's agentic patterns to llm-common: UnderstandPhase, ReflectPhase, IterativeOrchestrator, and streaming enhancements. Foundation for Prime Radiant and Affordabot RAG integration.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-09T07:10:40.708168-08:00","updated_at":"2026-01-09T07:10:40.708168-08:00"}
{"id":"llm-common-sw5.1","title":"A1: UnderstandPhase","description":"Create UnderstandPhase for intent/entity extraction. JULES_READY=true. Tasks: A1.1-A1.6 (schemas, implementation, tests). Est: 2h","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-09T07:10:50.208489-08:00","updated_at":"2026-01-09T07:10:50.208489-08:00","dependencies":[{"issue_id":"llm-common-sw5.1","depends_on_id":"llm-common-sw5","type":"parent-child","created_at":"2026-01-09T07:10:50.228094-08:00","created_by":"fengning"}]}
{"id":"llm-common-sw5.2","title":"A2: ReflectPhase","description":"Create ReflectPhase for completeness evaluation with 2-iteration limit. JULES_READY=true. Tasks: A2.1-A2.6 (schemas, implementation, tests). Est: 2.5h","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-09T07:10:52.611767-08:00","updated_at":"2026-01-09T07:10:52.611767-08:00","dependencies":[{"issue_id":"llm-common-sw5.2","depends_on_id":"llm-common-sw5","type":"parent-child","created_at":"2026-01-09T07:10:52.617364-08:00","created_by":"fengning"}]}
{"id":"llm-common-sw5.3","title":"B1: IterativeOrchestrator","description":"Full Dexter-style orchestrator with Understand-\u003ePlan-\u003eExecute-\u003eReflect loop. Depends on A1+A2. Tasks: B1.1-B1.7. Est: 4.5h","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-09T07:10:55.940429-08:00","updated_at":"2026-01-09T07:10:55.940429-08:00","dependencies":[{"issue_id":"llm-common-sw5.3","depends_on_id":"llm-common-sw5","type":"parent-child","created_at":"2026-01-09T07:10:55.949253-08:00","created_by":"fengning"}]}
{"id":"llm-common-sw5.4","title":"C1: ZaiClient Streaming Enhancement","description":"Add tool_stream=True for GLM-4.7, handle reasoning_content and delta.tool_calls. JULES_READY=true. Tasks: C1.1-C1.6. Est: 2.5h","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-09T07:10:58.410348-08:00","updated_at":"2026-01-09T07:10:58.410348-08:00","dependencies":[{"issue_id":"llm-common-sw5.4","depends_on_id":"llm-common-sw5","type":"parent-child","created_at":"2026-01-09T07:10:58.421003-08:00","created_by":"fengning"}]}
{"id":"llm-common-sw5.5","title":"C2: Exports and Release v0.5.0","description":"Update __init__.py exports, bump version, update CHANGELOG. Tasks: C2.1-C2.5. Est: 1h","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-09T07:10:59.202304-08:00","updated_at":"2026-01-09T07:10:59.202304-08:00","dependencies":[{"issue_id":"llm-common-sw5.5","depends_on_id":"llm-common-sw5","type":"parent-child","created_at":"2026-01-09T07:10:59.208216-08:00","created_by":"fengning"}]}
{"id":"llm-common-up3","title":"Fix duplicate pyyaml in pyproject.toml (breaks Poetry installs)","description":"pyproject.toml contains duplicate pyyaml dependency (required + optional), causing TOMLDecodeError 'Cannot overwrite a value'. Blocks downstream repos from updating llm-common.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-26T15:56:24.442858-08:00","updated_at":"2025-12-26T17:15:04.658949-08:00","closed_at":"2025-12-26T17:15:04.658949-08:00"}
