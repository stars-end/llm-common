from typing import List, Optional, Dict, Any
from pydantic import BaseModel, Field

class SubTask(BaseModel):
    """A specific data gathering step within a larger task."""
    id: int
    description: str = Field(..., description="Specific description of data to gather")

class PlannedTask(BaseModel):
    """A high-level task that contains subtasks."""
    id: int
    description: str = Field(..., description="High level description of the task")
    sub_tasks: List[SubTask] = Field(default_factory=list, description="List of specific data gathering subtasks")

class ExecutionPlan(BaseModel):
    """The complete execution plan generated by the planner."""
    tasks: List[PlannedTask]

class ToolCall(BaseModel):
    """A request to call a specific tool."""
    tool: str = Field(..., description="Name of the tool to call")
    args: Dict[str, Any] = Field(..., description="Arguments for the tool")
    reasoning: str = Field(..., description="Why this tool is being called")

class SubTaskResult(BaseModel):
    """Result of a subtask execution."""
    task_id: int
    sub_task_id: int
    success: bool
    result: Any = None
    error: Optional[str] = None
